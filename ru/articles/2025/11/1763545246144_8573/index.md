---
# -------------------------------------------------------------------------------------------------------------------- #
# GENERAL
# -------------------------------------------------------------------------------------------------------------------- #

title: 'PostgreSQL'
description: ''
icon: 'far fa-file-lines'
categories:
  - 'postgresql'
tags:
  - 'postgresql'
  - 'create'
authors:
  - 'KaiKimera'
sources:
  - ''
license: 'CC-BY-SA-4.0'
complexity: '0'
toc: 1
comments: 1

# -------------------------------------------------------------------------------------------------------------------- #
# DATE
# -------------------------------------------------------------------------------------------------------------------- #

date: '2025-11-19T12:40:46+03:00'
publishDate: '2025-11-19T12:40:46+03:00'
lastMod: '2025-11-19T12:40:46+03:00'

# -------------------------------------------------------------------------------------------------------------------- #
# META
# -------------------------------------------------------------------------------------------------------------------- #

type: 'articles'
hash: '6f7361272f6ebe2bb120291c1dc1dd589a625a48'
uuid: '6f736127-2f6e-5e2b-8120-291c1dc1dd58'
slug: '6f736127-2f6e-5e2b-8120-291c1dc1dd58'

draft: 0
---

Специализированные настройки под задачи {{< tag "PostgreSQL" >}}.

<!--more-->

### PostgreSQL

- Создать основной том `pgsql` с алгоритмом компрессии `zstd`:

```bash
p='data'; v='pgsql'; o=('-o' 'compression=zstd'); zfs create "${o[@]}" "${p}/${v}"
```

- Создать специальный том `pgsql/main` с алгоритмом компрессии `zstd` и размером блока `32K` для баз данных:

```bash
p='data'; v='pgsql/main'; o=('-o' 'recordsize=32K'); zfs create "${o[@]}" "${p}/${v}" && chmod 700 "/${p}/${v}"
```

- Создать специальный том `pgsql/wal` с алгоритмом компрессии `zstd` и размером блока `32K` для WAL:

```bash
p='data'; v='pgsql/wal'; o=('-o' 'recordsize=32K'); zfs create "${o[@]}" "${p}/${v}"
```

- Откорректировать настройки {{< tag "PostgreSQL" >}}:

```ini
data_directory = '/data/pgsql/main'
full_page_writes = off
wal_init_zero = off
wal_recycle = off
```
