---
# -------------------------------------------------------------------------------------------------------------------- #
# GENERAL
# -------------------------------------------------------------------------------------------------------------------- #

title: 'Снимки'
description: ''
icon: 'far fa-file-lines'
categories:
  - 'snapshot'
tags:
  - 'snapshot'
  - 'rename'
  - 'rollback'
  - 'destroy'
authors:
  - 'KaiKimera'
sources:
  - ''
license: 'CC-BY-SA-4.0'
complexity: '0'
toc: 1
comments: 1

# -------------------------------------------------------------------------------------------------------------------- #
# DATE
# -------------------------------------------------------------------------------------------------------------------- #

date: '2025-11-19T12:40:08+03:00'
publishDate: '2025-11-19T12:40:08+03:00'
lastMod: '2025-11-19T12:40:08+03:00'

# -------------------------------------------------------------------------------------------------------------------- #
# META
# -------------------------------------------------------------------------------------------------------------------- #

type: 'articles'
hash: '17ca23dbd5f94b426a51e8bdac2ac03010cb8f00'
uuid: '17ca23db-d5f9-5b42-9a51-e8bdac2ac030'
slug: '17ca23db-d5f9-5b42-9a51-e8bdac2ac030'

draft: 0
---

Работа со снимками.

<!--more-->

### Список снимков

- Показать список всех снимков:

```bash
zfs list -t 'snapshot'
```

- Показать список снимков тома `cloud` в пуле `data`:

```bash
p='data'; v='cloud'; zfs list -r -t 'snapshot' -o 'name,creation' "${p}/${v}"
```

### Создание снимков

- Создать снимок `2024-08-21.19-32-02` тома `cloud` в пуле `data`:

```bash
p='data'; v='cloud'; s="$( date '+%F.%H-%M-%S' )"; zfs snapshot "${p}/${v}@${s}"
```

- Создать снимок `2024-08-21.19-32-02` тома `cloud` и всех его дочерних томов в пуле `data`:

```bash
p='data'; v='cloud'; s="$( date '+%F.%H-%M-%S' )"; zfs snapshot -r "${p}/${v}@${s}"
```

### Переименование снимков

- Переименовать снимок `name_OLD` тома `cloud` в пуле `data`:

```bash
p='data'; v='cloud'; zfs rename "${p}/${v}@name_OLD" 'name_NEW'
```

- Переименовать снимок `name_OLD` тома `cloud` и во всех его дочерних томов в пуле `data`:

```bash
p='data'; v='cloud'; zfs rename -r "${p}/${v}@name_OLD" 'name_NEW'
```

### Откат данных к снимку

- Выполнить откат данных к снимку `2024-08-21.19-32-02` тома `cloud` в пуле `data`:

```bash
p='data'; v='cloud'; s='2024-08-21.19-32-02'; zfs rollback "${p}/${v}@${s}"
```

### Удаление снимков

- Удалить снимок `2024-08-21.19-32-02` тома `cloud` в пуле `data`:

```bash
p='data'; v='cloud'; s='2024-08-21.19-32-02'; zfs destroy "${p}/${v}@${s}"
```
